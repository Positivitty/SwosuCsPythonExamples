<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Cashier's Algorithm</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(45deg, #2c3e50, #3498db);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            opacity: 0.9;
            font-size: 1.1em;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            padding: 30px;
        }

        .input-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 12px;
            border: 2px solid #e9ecef;
        }

        .input-section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #495057;
        }

        .input-group input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 1.1em;
            transition: all 0.3s ease;
        }

        .input-group input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .calculate-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.2em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(46, 204, 113, 0.3);
        }

        .results-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 12px;
            border: 2px solid #e9ecef;
        }

        .results-section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .change-display {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #3498db;
        }

        .total-change {
            font-size: 2em;
            font-weight: bold;
            color: #27ae60;
            text-align: center;
            margin-bottom: 15px;
        }

        .money-container {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            margin-top: 20px;
        }

        .money-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            padding: 15px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            min-width: 100px;
        }

        .money-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .money-visual {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            font-size: 0.9em;
            text-align: center;
            line-height: 1.2;
            position: relative;
            overflow: hidden;
        }

        .money-visual.bill {
            border-radius: 8px;
            width: 80px;
            height: 40px;
        }

        .money-visual.coin {
            border: 3px solid #ffd700;
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            color: #8b4513;
        }

        .money-visual.bill.hundred { background: linear-gradient(45deg, #2ecc71, #27ae60); }
        .money-visual.bill.fifty { background: linear-gradient(45deg, #e74c3c, #c0392b); }
        .money-visual.bill.twenty { background: linear-gradient(45deg, #f39c12, #d68910); }
        .money-visual.bill.ten { background: linear-gradient(45deg, #9b59b6, #8e44ad); }
        .money-visual.bill.five { background: linear-gradient(45deg, #3498db, #2980b9); }
        .money-visual.bill.one { background: linear-gradient(45deg, #34495e, #2c3e50); }

        .money-count {
            font-size: 1.5em;
            font-weight: bold;
            color: #2c3e50;
            background: #ecf0f1;
            padding: 8px 12px;
            border-radius: 20px;
            min-width: 40px;
            text-align: center;
        }

        .money-label {
            font-size: 0.9em;
            color: #7f8c8d;
            font-weight: 600;
        }

        .error-message {
            background: #e74c3c;
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
            font-weight: 600;
        }

        .success-message {
            background: #27ae60;
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
            font-weight: 600;
        }

        .preset-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .preset-btn {
            padding: 8px 15px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s ease;
        }

        .preset-btn:hover {
            background: #2980b9;
        }

        .algorithm-info {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            font-size: 0.9em;
            color: #856404;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
                gap: 20px;
                padding: 20px;
            }
            
            .money-container {
                gap: 10px;
            }
            
            .money-item {
                min-width: 80px;
            }
        }

        .animate-count {
            animation: countUp 0.5s ease-out;
        }

        @keyframes countUp {
            from { transform: scale(1.5); }
            to { transform: scale(1); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üí∞ Interactive Cashier's Algorithm</h1>
            <p>Click on the money to see the optimal change breakdown!</p>
        </div>

        <div class="main-content">
            <div class="input-section">
                <h2>üí≥ Transaction Details</h2>
                
                <div class="preset-buttons">
                    <button class="preset-btn" onclick="setPreset('23.58', '40.00')">Example: $23.58 ‚Üí $40.00</button>
                    <button class="preset-btn" onclick="setPreset('5.47', '20.00')">Quick: $5.47 ‚Üí $20.00</button>
                    <button class="preset-btn" onclick="setPreset('99.99', '105.00')">Simple: $99.99 ‚Üí $105.00</button>
                </div>

                <div class="input-group">
                    <label for="amountDue">Amount Due ($)</label>
                    <input type="number" id="amountDue" placeholder="23.58" step="0.01" min="0">
                </div>

                <div class="input-group">
                    <label for="amountPaid">Amount Paid ($)</label>
                    <input type="number" id="amountPaid" placeholder="40.00" step="0.01" min="0">
                </div>

                <button class="calculate-btn" onclick="calculateChange()">
                    üßÆ Calculate Change
                </button>

                <div class="algorithm-info">
                    <strong>üí° How it works:</strong> The greedy algorithm sorts denominations from largest to smallest, 
                    then uses as many of each denomination as possible. This works optimally for standard currency systems 
                    like US dollars, but may not be optimal for all coin systems.
                </div>
            </div>

            <div class="results-section">
                <h2>üéØ Change Breakdown</h2>
                <div id="results">
                    <div style="text-align: center; color: #7f8c8d; padding: 40px;">
                        Enter transaction details and click calculate to see the magic! ‚ú®
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // US denominations in cents [value, name, type]
        const denominations = [
            [10000, '$100', 'bill', 'hundred'],
            [5000, '$50', 'bill', 'fifty'],
            [2000, '$20', 'bill', 'twenty'],
            [1000, '$10', 'bill', 'ten'],
            [500, '$5', 'bill', 'five'],
            [100, '$1', 'bill', 'one'],
            [25, '25¬¢', 'coin', 'quarter'],
            [10, '10¬¢', 'coin', 'dime'],
            [5, '5¬¢', 'coin', 'nickel'],
            [1, '1¬¢', 'coin', 'penny']
        ];

        function setPreset(due, paid) {
            document.getElementById('amountDue').value = due;
            document.getElementById('amountPaid').value = paid;
        }

        function makeChange(amountDueCents, amountPaidCents) {
            if (amountPaidCents < amountDueCents) {
                throw new Error("Insufficient payment.");
            }

            const changeCents = amountPaidCents - amountDueCents;
            if (changeCents === 0) {
                return {};
            }

            const changeBreakdown = {};
            let remainingAmount = changeCents;

            // Greedy algorithm: O(k) time complexity
            for (const [denom] of denominations) {
                if (remainingAmount >= denom) {
                    const count = Math.floor(remainingAmount / denom);
                    changeBreakdown[denom] = count;
                    remainingAmount %= denom;
                }
            }

            if (remainingAmount > 0) {
                throw new Error("Exact change not possible with given denominations.");
            }

            return changeBreakdown;
        }

        function formatCurrency(cents) {
            return (cents / 100).toLocaleString('en-US', {
                style: 'currency',
                currency: 'USD'
            });
        }

        function createMoneyVisual(denom, name, type, colorClass, count) {
            const moneyItem = document.createElement('div');
            moneyItem.className = 'money-item';
            moneyItem.onclick = () => animateClick(moneyItem);

            const visual = document.createElement('div');
            visual.className = `money-visual ${type} ${colorClass}`;
            visual.textContent = name;

            const countDisplay = document.createElement('div');
            countDisplay.className = 'money-count';
            countDisplay.textContent = count;

            const label = document.createElement('div');
            label.className = 'money-label';
            label.textContent = `√ó ${count}`;

            moneyItem.appendChild(visual);
            moneyItem.appendChild(countDisplay);
            moneyItem.appendChild(label);

            return moneyItem;
        }

        function animateClick(element) {
            element.style.transform = 'scale(0.95)';
            setTimeout(() => {
                element.style.transform = 'translateY(-5px)';
            }, 150);
        }

        function calculateChange() {
            const amountDueStr = document.getElementById('amountDue').value;
            const amountPaidStr = document.getElementById('amountPaid').value;
            const resultsDiv = document.getElementById('results');

            try {
                // Validate inputs
                if (!amountDueStr || !amountPaidStr) {
                    throw new Error("Please enter both amount due and amount paid.");
                }

                const amountDue = parseFloat(amountDueStr);
                const amountPaid = parseFloat(amountPaidStr);

                if (isNaN(amountDue) || isNaN(amountPaid) || amountDue < 0 || amountPaid < 0) {
                    throw new Error("Please enter valid positive numbers.");
                }

                // Convert to cents to avoid floating point errors
                const amountDueCents = Math.round(amountDue * 100);
                const amountPaidCents = Math.round(amountPaid * 100);

                const changeBreakdown = makeChange(amountDueCents, amountPaidCents);
                const totalChangeCents = amountPaidCents - amountDueCents;

                // Display results
                if (totalChangeCents === 0) {
                    resultsDiv.innerHTML = `
                        <div class="success-message">
                            Perfect! No change needed. Exact payment received. üéØ
                        </div>
                    `;
                    return;
                }

                let html = `
                    <div class="change-display">
                        <div class="total-change">${formatCurrency(totalChangeCents)}</div>
                        <div style="text-align: center; color: #7f8c8d;">Total Change Due</div>
                    </div>
                `;

                if (Object.keys(changeBreakdown).length > 0) {
                    html += '<div class="money-container">';
                    
                    // Display money in order of denominations
                    for (const [denom, name, type, colorClass] of denominations) {
                        if (changeBreakdown[denom]) {
                            const moneyElement = createMoneyVisual(denom, name, type, colorClass, changeBreakdown[denom]);
                            html += moneyElement.outerHTML;
                        }
                    }
                    
                    html += '</div>';
                }

                resultsDiv.innerHTML = html;

                // Add click handlers to new elements
                setTimeout(() => {
                    const moneyItems = resultsDiv.querySelectorAll('.money-item');
                    moneyItems.forEach(item => {
                        item.onclick = () => animateClick(item);
                    });
                }, 100);

            } catch (error) {
                resultsDiv.innerHTML = `
                    <div class="error-message">
                        ‚ùå ${error.message}
                    </div>
                `;
            }
        }

        // Allow Enter key to calculate
        document.addEventListener('DOMContentLoaded', function() {
            const inputs = document.querySelectorAll('input');
            inputs.forEach(input => {
                input.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        calculateChange();
                    }
                });
            });
        });

        // Auto-calculate on input change (with debounce)
        let timeoutId;
        function handleInputChange() {
            clearTimeout(timeoutId);
            timeoutId = setTimeout(() => {
                const amountDue = document.getElementById('amountDue').value;
                const amountPaid = document.getElementById('amountPaid').value;
                if (amountDue && amountPaid) {
                    calculateChange();
                }
            }, 500);
        }

        document.getElementById('amountDue').oninput = handleInputChange;
        document.getElementById('amountPaid').oninput = handleInputChange;
    </script>
</body>
</html>